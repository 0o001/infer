<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="search" type="application/opensearchdescription+xml" title="Infer" href="/opensearch.xml"><title data-react-helmet="true">Building checkers with the Infer.AI framework | Infer</title><meta data-react-helmet="true" name="docsearch:version" content="0.17.0"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Building checkers with the Infer.AI framework | Infer"><meta data-react-helmet="true" name="description" content="Infer.AI is a framework for quickly developing abstract interpretation-based"><meta data-react-helmet="true" property="og:description" content="Infer.AI is a framework for quickly developing abstract interpretation-based"><meta data-react-helmet="true" property="og:url" content="https://fbinfer.com/docs/0.17.0/absint-framework"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://fbinfer.com/docs/0.17.0/absint-framework"><link rel="stylesheet" href="/styles.1e154459.css">
<link rel="preload" href="/styles.35bf4e5f.js" as="script">
<link rel="preload" href="/runtime~main.30d683a9.js" as="script">
<link rel="preload" href="/main.f7f5d4ef.js" as="script">
<link rel="preload" href="/1.04881651.js" as="script">
<link rel="preload" href="/2.323e8f4d.js" as="script">
<link rel="preload" href="/3.60e746cb.js" as="script">
<link rel="preload" href="/1be78505.25ad5882.js" as="script">
<link rel="preload" href="/163.bf45e8ea.js" as="script">
<link rel="preload" href="/a9f269f5.97a3689c.js" as="script">
<link rel="preload" href="/17896441.13c3ac7e.js" as="script">
<link rel="preload" href="/5ee65b1f.57b3b1fa.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Infer Logo"><strong class="navbar__title">Infer</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/support">Support</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter</a><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Facebook</a><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Infer Logo"><strong class="navbar__title">Infer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/support">Support</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="menu__link">Twitter</a></li><li class="menu__list-item"><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="menu__link">Facebook</a></li><li class="menu__list-item"><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Quick Start</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/getting-started">Getting started with Infer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/hello-world">Hello, World!</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/infer-workflow">Infer workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/analyzing-apps-or-projects">Analyzing apps or projects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/steps-for-ci">Recommended flow for CI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/checkers">Infer : AI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/eradicate">Infer : Eradicate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/linters">Infer : AL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/racerd">Infer : RacerD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/experimental-checkers">Infer : Experimental Checkers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/advanced-features">Advanced usage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/adding-models">Adding models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/man-pages">Infer Manuals</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Foundations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/about-Infer">About Infer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/separation-logic-and-bi-abduction">Separation logic and bi-abduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/limitations">Limitations, etc</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Bug Types Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/checkers-bug-types">Checkers bug types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/eradicate-warnings">Eradicate warnings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/linters-bug-types">Linters bug types</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Contribute</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/0.17.0/absint-framework">Building checkers with the Infer.AI framework</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.17.0/adding-checkers">Simple intraprocedural checkers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.17.0/internal-API">Infer Internal OCaml Modules API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.17.0/versions">Documentation Versions</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is archived documentation for Infer <strong>v0.17.0</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/getting-started">latest version</a></strong>.</div></div><div class="docItemContainer_2cwg"><article><div><span class="badge badge--secondary">Version: 0.17.0</span></div><header><h1 class="docTitle_1vWb">Building checkers with the Infer.AI framework</h1></header><div class="markdown"><p>Infer.AI is a framework for quickly developing abstract interpretation-based
checkers (intraprocedural or interprocedural). You define only:</p><p>(1) An abstract domain (type of abstract state plus <code>&lt;=</code>, <code>join</code>, and <code>widen</code>
operations)</p><p>(2) Transfer functions (a transformer that takes an abstract state as input and
produces an abstract state as output)</p><p>and then you have an analysis that can run on all of the languages Infer
supports (C, Obj-C, C++, and Java)!</p><p>This guide covers how to use the framework. For background on why we built the
framework and how it works, check out these
<a href="http://fbinfer.com/downloads/pldi17-infer-ai-tutorial.pdf">slides</a> from a PLDI
2017 tutorial and this
<a href="https://atscaleconference.com/videos/getting-the-most-out-of-static-analyzers" target="_blank" rel="noopener noreferrer">talk</a>
from @Scale2016.</p><p><strong>If you feel like coding instead of reading, a great way to get started with
Infer.AI is to go through the lab exercise
<a href="https://github.com/facebook/infer/blob/master/infer/src/labs/lab.md">here</a>.</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="by-example-intraprocedural-analysis"></a>By example: intraprocedural analysis<a aria-hidden="true" tabindex="-1" class="hash-link" href="#by-example-intraprocedural-analysis" title="Direct link to heading">#</a></h2><p>This section helps you get started ASAP if you already understand
<a href="http://www.di.ens.fr/~cousot/AI/IntroAbsInt.html">abstract interpretation</a> (or
don&#x27;t, but are feeling bold).</p><p>Take a look at
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/liveness.ml">liveness.ml</a>.
This code is performing a compilers-101 style liveness analysis over
<a href="#ir-basics-sil-cfgs-tenvs-procdescs-and-procnames">SIL</a>, Infer&#x27;s intermediate
language. Since this code is fairly small and you should already understand what
it&#x27;s trying to do, it&#x27;s a fairly good place to look in order to understand both
how to use the abstract interpretation framework and what SIL is.</p><p>There are basically three important bits here: defining the domain, defining the
transfer functions, and then passing the pieces to the framework to create an an
analysis. Let&#x27;s break down the third bit:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module Analyzer =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  AbstractInterpreter.Make</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (ProcCfg.Backward(ProcCfg.Exceptional))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (TransferFunctions)</span></div></div></div></div></div><p>The <code>ProcCfg.Backward(ProcCfg.Exceptional)</code> part says: &quot;I want the direction of
iteration to be backward&quot; (since liveness is a backward analysis), and &quot;I want
to the analysis to follow exceptional edges&quot;. For a forward analysis that
ignores exceptional edges, you would do <code>ProcCfg.Normal</code> instead (and many other
combinations are possible; take a look at
<a href="https://github.com/facebook/infer/blob/master/infer/src/absint/ProcCfg.mli">ProcCfg.mli</a>
for more). And finally, the <code>TransferFunctions</code> part says &quot;Use the transfer
functions I defined above&quot;.</p><p>Now you have an <code>Analyzer</code> module that exposes useful functions like
<a href="https://github.com/facebook/infer/blob/master/infer/src/absint/AbstractInterpreter.mli#L30"><code>compute_post</code></a>
(take a procedure as input and compute a postcondition) and
<a href="https://github.com/facebook/infer/blob/master/infer/src/absint/AbstractInterpreter.mli#L36"><code>exec_pdesc</code></a>
(take a procedure and compute an invariant map from node id&#x27;s to the pre/post at
each node). The next step is to hook your checker up to the Infer CLI. For the
liveness analysis, you would do this by exposing a function for running the
checker on a single procedure:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">let checker { Callbacks.proc_desc; tenv; } =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  match Analyzer.compute_post (ProcData.make_default proc_desc tenv) with</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  | Some post -&gt; Logging.progress &quot;Computed post %a for %a&quot; Analyzer.Domain.pp post Typ.Procname.pp (Procdesc.get_proc_name proc_desc);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  | None -&gt; ()</span></div></div></div></div></div><p>and then adding <code>Liveness.checker, checkers_enabled</code> to the list of registered
checkers
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/registerCheckers.ml#L42">here</a>.</p><p>you can then run <code>infer run -a checkers -- &lt;your_build_command&gt;</code> to run your
checker on real code. See <a href="/docs/analyzing-apps-or-projects">here</a> for more
details on the build systems supported by Infer.</p><p>Other examples of simple intraprocedural checkers are
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/addressTaken.ml">addressTaken.ml</a>
and
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/copyPropagation.ml">copyPropagation.ml</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="basic-error-reporting"></a>Basic error reporting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#basic-error-reporting" title="Direct link to heading">#</a></h2><p>Useful analyses have output. Basic printing to stderr or stderr is good for
debugging, but to report a programmer-readable error that is tied to a source
code location, you&#x27;ll want to use <code>Reporting.log_error</code>. Some examples of
error-logging code:
<a href="https://github.com/facebook/infer/blob/master/infer/src/concurrency/RacerD.ml#L166">1</a>,
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/annotationReachability.ml#L224">2</a>,
or
<a href="https://github.com/facebook/infer/blob/master/infer/src/quandary/TaintAnalysis.ml#L186">3</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="by-example-interprocedural-analysis"></a>By example: interprocedural analysis<a aria-hidden="true" tabindex="-1" class="hash-link" href="#by-example-interprocedural-analysis" title="Direct link to heading">#</a></h2><p>Let&#x27;s assume you have already read and understood the &quot;intraprocedural analysis&quot;
section and have an intraprocedural checker. The abstract interpretation
framework makes it easy to convert your intraprocedural analysis into a
<em>modular</em> interprocedural analysis. Let me emphasize the <em>modular</em> point once
more; global analyses cannot be expressed in this framework.</p><p>To make your checker interprocedural, you need to:</p><p>(1) Define the type of procedure summaries for your analysis and add some
boilerplate for storing your data alongside the summaries for other analyses</p><p>(2) Add logic for (a) using summaries in your transfer functions and (b)
converting your intraprocedural abstract state to a summary.</p><p>A good example to look at here is
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/Siof.ml">siof.ml</a>.
Step (1) is just:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module Summary = Summary.Make (struct</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type summary = SiofDomain.astate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    let update_payload astate payload =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      { payload with Specs.siof = Some astate }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    let read_from_payload payload =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      payload.Specs.siof</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end)</span></div></div></div></div></div><p>along with adding the <code>Specs.siof</code>
<a href="https://github.com/facebook/infer/blob/master/infer/src/backend/specs.ml#L329">field</a>
to the <code>Specs.payload</code> record
<a href="https://github.com/facebook/infer/blob/master/infer/src/backend/specs.ml#L321">type</a>.
Here, the type of the abstract state and the type of the summary are the same,
which makes things easier for us (no logic to convert an abstract state to a
summary).</p><p>Part (2a) is
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/Siof.ml#L65">here</a>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">match Summary.read_summary pdesc callee_pname with</span></div></div></div></div></div><p>This says: &quot;read the summary for <code>callee_pname</code> from procedure <code>pdesc</code> with type
environment <code>tenv</code>&quot;. You must then add logic for applying the summary to the
current abstract state (often, this is as simple as doing a join).</p><p>Because our summary type is the same as the abstract state, part (2b) can be
done for us by making use of the convenient
<code>AbstractInterpreter.Interprocedural</code>
<a href="https://github.com/facebook/infer/blob/master/infer/src/absint/AbstractInterpreter.mli#L19">functor</a>
(for an example of what to do when the types are different, take a look at
<a href="https://github.com/facebook/infer/blob/master/infer/src/quandary/TaintAnalysis.ml#L540">Quandary</a>):</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module Interprocedural = Analyzer.Interprocedural (Summary)</span></div></div></div></div></div><p>This <code>Interprocedural</code> module will automatically do the work of computing and
storing the summary for us. All we need to do is change the exposed <code>checker</code>
function registered in <code>registerCheckers.ml</code> to call <code>Interprocedural.checker</code>
instead:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">let checker callback =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ignore(Interprocedural.checker callback ProcData.empty_extras in)</span></div></div></div></div></div><p>That&#x27;s it! We now have an interprocedural analysis.</p><p>One very important note here: a current (and soon-to-be-lifted) limitation
prevents us from running multiple interprocedural checkers at the same time. If
you register an interprocedural checker, be sure to unregister the other other
ones. Otherwise, there&#x27;s a risk that the checkers will clobber each other&#x27;s
results.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="relevant-code"></a>Relevant code<a aria-hidden="true" tabindex="-1" class="hash-link" href="#relevant-code" title="Direct link to heading">#</a></h2><p>Some pointers to useful code for building new analyses, and to the
implementation of the framework for the interested:</p><p>Domain combinators:</p><ul><li><code>AbstractDomain.BottomLifted</code>, <code>AbstractDomain.FiniteSet</code>,
<code>AbstractDomain.Map</code>, <code>AbstractDomain.Pair</code> (all in
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/AbstractDomain.mli">AbstractDomain</a>)</li></ul><p>Domains and domain building blocks:</p><ul><li><a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/accessPath.mli">AccessPath</a></li><li><a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/accessPathDomains.mli">AccessPathDomains</a></li><li><a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/accessTree.ml">AccessTree</a></li></ul><p>Reporting errors with interprocedural traces:</p><ul><li>Examples:
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/SiofTrace.ml"><code>SiofTrace.ml</code></a>,
<a href="https://github.com/facebook/infer/blob/master/infer/src/quandary/JavaTrace.ml"><code>JavaTrace.ml</code></a>,
<a href="https://github.com/facebook/infer/blob/master/infer/src/quandary/CppTrace.ml"><code>CppTrace.ml</code></a>.</li><li>Implementation:
<a href="https://github.com/facebook/infer/blob/master/infer/src/checkers/Trace.mli"><code>Trace</code></a></li></ul><p>Implementation:</p><ul><li><a href="https://github.com/facebook/infer/blob/master/infer/src/absint/AbstractDomain.ml"><code>AbstractDomain</code></a></li><li><a href="https://github.com/facebook/infer/blob/master/infer/src/absint/AbstractInterpreter.mli"><code>TransferFunctions</code></a></li><li><a href="https://github.com/facebook/infer/blob/master/infer/src/absint/AbstractInterpreter.mli"><code>AbstractInterpreter</code></a></li><li><a href="https://github.com/facebook/infer/blob/master/infer/src/absint/ProcCfg.mli"><code>ProcCFG</code></a></li><li><a href="https://github.com/facebook/infer/blob/master/infer/src/absint/Summary.ml"><code>Summary</code></a></li><li><a href="https://github.com/facebook/infer/blob/master/infer/src/absint/Scheduler.ml"><code>Scheduler</code></a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="ir-basics-sil-cfgs-tenvs-procdescs-and-procnames"></a>IR basics: SIL, CFG&#x27;s, <code>tenv</code>&#x27;s, <code>procdesc</code>&#x27;s, and <code>procname</code>&#x27;s<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ir-basics-sil-cfgs-tenvs-procdescs-and-procnames" title="Direct link to heading">#</a></h2><p>All of the languages analyzed by Infer are converted into a common intermediate
representation. A program is represented as a control-flow graph
(<a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Cfg.rei">CFG</a>)
whose nodes contain lists of instructions in the SIL language. SIL is a small
low-level language that has some similarities with C, LLVM
<a href="http://llvm.org/docs/LangRef.html">IR</a>, and
<a href="https://research.microsoft.com/en-us/um/people/leino/papers/krml178.pdf">Boogie</a>.</p><p><a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Exp.rei#L25">Expressions</a>
are literals, program variables (<code>Pvar</code>&#x27;s), temporary variables (<code>Ident</code>&#x27;s), a
field offset from a struct (OO features like objects are lowered into struct&#x27;s),
or an index offset from an array.</p><p>There are four interesting kinds of
<a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Sil.rei#L38">instructions</a>:
<code>Load</code> for reading into a temporary variable, <code>Store</code> for writing to a program
variable, field of a struct, or an array, <code>Prune e</code> (often called <code>assume</code> in
other PL formalisms) blocks execution unless the expression <code>e</code> evaluates to
true, and <code>Call</code> represents function calls.</p><p>Instructions and expressions have
<a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Typ.rei#L76">types</a>.
A <code>Tstruct</code> (think: object) type has a
<a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Typename.rei#L13"><code>Typename</code></a>,
and it is often useful to look up metadata about the type (what fields does it
have, what methods does it declare, what is its superclass, etc.) in the type
environment, or
<a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Tenv.rei#L37"><code>tenv</code></a>.</p><p>A procedure description or
<a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Procdesc.rei"><code>procdesc</code></a>
(sometimes abbreviated <code>pdesc</code>) is an abstraction of a procedure declaration: it
stores the CFG of the procedure, its signature, its annotations, and so on.</p><p>A procedure name or
<a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Procname.rei"><code>procname</code></a>
(sometimes abbreviated <code>pname</code>) is an abstraction of a called procedure name.
One procname may correspond to multiple (or zero) <code>procdesc</code>&#x27;s after resolution.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="framework-specific-ir-proccfg-procdata-and-extras"></a>Framework-specific IR: <code>ProcCFG</code>, <code>ProcData</code>, and <code>extras</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#framework-specific-ir-proccfg-procdata-and-extras" title="Direct link to heading">#</a></h2><p>The abstract interpretation framework has a few additional constructs that are
worth explaining.</p><p>A
<a href="https://github.com/facebook/infer/blob/master/infer/src/absint/procCfg.mli"><code>ProcCfG</code></a>
represents the CFG of a <em>single</em> procedure whereas (perhaps confusingly) a
<a href="https://github.com/facebook/infer/blob/master/infer/src/IR/Cfg.rei"><code>Cfg</code></a> is
the CFG for an entire file. A <code>ProcCfg</code> is really a customizable view of the
underlying procedure CFG; we can get a view the CFG with its edges backward
(<code>ProcCfg.Backward</code>), with or without exceptional edges (<code>Normal</code>/<code>Exceptional</code>,
respectively), or with each node holding at most one instruction
(<code>OneInstrPerNode</code>).</p><p><a href="https://github.com/facebook/infer/blob/master/infer/src/absint/procData.mli"><code>ProcData</code></a>
is a container that holds all of the read-only information required to analyze a
single procedure: procedure description, and <code>extras</code>. The <code>extras</code> are custom
read-only data that are computed before analysis begins, and can be accessed
from the transfer functions. Most often, no extras are required for analysis
(<code>ProcData.empty_extras</code>), but it can be useful to stash information like a map
from a formal to its
<a href="https://github.com/facebook/infer/blob/master/infer/src/quandary/TaintAnalysis.ml#L88">index</a>
or an invariant
<a href="https://github.com/facebook/infer/blob/master/infer/src/backend/preanal.ml#L115">map</a>
from a prior analysis in the extras.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="how-it-works"></a>How it works<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-it-works" title="Direct link to heading">#</a></h2><p>Coming soon.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="intro-abstract-interpretation"></a>Intro: abstract interpretation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#intro-abstract-interpretation" title="Direct link to heading">#</a></h2><p>Coming soon.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="how-do-i-make-an-analysis-compositional"></a>How do I make an analysis compositional?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-do-i-make-an-analysis-compositional" title="Direct link to heading">#</a></h2><p>Coming soon.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/0.17.0/linters-bug-types"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Linters bug types</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/0.17.0/adding-checkers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Simple intraprocedural checkers »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#by-example-intraprocedural-analysis" class="table-of-contents__link">By example: intraprocedural analysis</a></li><li><a href="#basic-error-reporting" class="table-of-contents__link">Basic error reporting</a></li><li><a href="#by-example-interprocedural-analysis" class="table-of-contents__link">By example: interprocedural analysis</a></li><li><a href="#relevant-code" class="table-of-contents__link">Relevant code</a></li><li><a href="#ir-basics-sil-cfgs-tenvs-procdescs-and-procnames" class="table-of-contents__link">IR basics: SIL, CFG&#39;s, <code>tenv</code>&#39;s, <code>procdesc</code>&#39;s, and <code>procname</code>&#39;s</a></li><li><a href="#framework-specific-ir-proccfg-procdata-and-extras" class="table-of-contents__link">Framework-specific IR: <code>ProcCFG</code>, <code>ProcData</code>, and <code>extras</code></a></li><li><a href="#how-it-works" class="table-of-contents__link">How it works</a></li><li><a href="#intro-abstract-interpretation" class="table-of-contents__link">Intro: abstract interpretation</a></li><li><a href="#how-do-i-make-an-analysis-compositional" class="table-of-contents__link">How do I make an analysis compositional?</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/infer-workflow">User Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about-Infer">Foundations</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/checkers-bug-types">Bug Types Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/absint-framework">Contribute</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/support">Support</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.35bf4e5f.js"></script>
<script src="/runtime~main.30d683a9.js"></script>
<script src="/main.f7f5d4ef.js"></script>
<script src="/1.04881651.js"></script>
<script src="/2.323e8f4d.js"></script>
<script src="/3.60e746cb.js"></script>
<script src="/1be78505.25ad5882.js"></script>
<script src="/163.bf45e8ea.js"></script>
<script src="/a9f269f5.97a3689c.js"></script>
<script src="/17896441.13c3ac7e.js"></script>
<script src="/5ee65b1f.57b3b1fa.js"></script>
</body>
</html>